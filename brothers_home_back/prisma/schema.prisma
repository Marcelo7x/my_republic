datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

model User {
    user_id    Int       @id @default(autoincrement())
    first_name String
    last_name  String
    email      String    @unique
    password   String
    role       UserRole  @default(user)
    home       Home?     @relation(fields: [home_id], references: [home_id])
    home_id    Int?
    Invoice    Invoice[]
}

enum UserRole {
    admin
    user
    manager
}

model Home {
    home_id  Int       @id @default(autoincrement())
    name     String    @unique
    street   String?
    district String?
    city     String?
    state    String?
    country  String?
    number   Int?
    cep      Int?
    user     User[]
    Invoice  Invoice[]
}

model Invoice {
    invoice_id  Int      @id @default(autoincrement())
    description String?
    price       Int
    date        DateTime @default(now())
    image       Bytes?
    fixed       Boolean  @default(false)
    paid        PaidRole @default(unpaid)
    category    Category @relation(fields: [category_id], references: [category_id])
    user        User     @relation(fields: [user_id], references: [user_id])
    home        Home     @relation(fields: [home_id], references: [home_id])
    category_id Int
    user_id     Int
    home_id     Int
}

enum PaidRole {
    unpaid
    payed
    anypayed
}

model Category {
    category_id Int       @id @default(autoincrement())
    name        String
    Invoice     Invoice[]
}
